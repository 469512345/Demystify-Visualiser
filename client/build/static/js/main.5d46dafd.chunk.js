(this["webpackJsonpdemystify-visualiser"]=this["webpackJsonpdemystify-visualiser"]||[]).push([[0],{61:function(t,e,r){},87:function(t,e,r){"use strict";r.r(e);var s=r(0),i=r.n(s),n=r(24),a=r.n(n),o=(r(61),r(6)),l=r(7),c=r(34),h=r(9),u=r(8),p=r(93),d=r(12),g=r(99),b=r(96),j=r(54),m=r(1),f=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(o.a)(this,r);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))).state={currentStep:t.props.currentStep},t}return Object(l.a)(r,[{key:"nextStep",value:function(){var t=this.state.currentStep+1;t<=this.props.maxSteps&&(this.setState({currentStep:t}),this.props.setCurrentStep(t))}},{key:"lastStep",value:function(){var t=this.state.currentStep-1;t>=0&&(this.setState({currentStep:t}),this.props.setCurrentStep(t))}},{key:"componentDidUpdate",value:function(t){t.currentStep!==this.props.currentStep&&this.setState({currentStep:this.props.currentStep})}},{key:"render",value:function(){return Object(m.jsx)(g.a,{className:this.props.className,children:Object(m.jsxs)(b.a,{inline:!0,onSubmit:function(t){return t.preventDefault()},className:"d-flex justify-content-between",children:[Object(m.jsxs)(j.a,{variant:"primary",onClick:this.lastStep.bind(this),children:["Last ",this.props.stepName]}),Object(m.jsxs)(b.a.Group,{children:[Object(m.jsxs)(b.a.Label,{className:"w-70 mr-2",children:["Current ",this.props.stepName,":"]}),Object(m.jsx)(b.a.Label,{className:"w-70 mr-2",children:this.state.currentStep+1})]}),Object(m.jsxs)(j.a,{variant:"primary",onClick:this.nextStep.bind(this),children:["Next ",this.props.stepName]})]})})}}]),r}(i.a.Component),x=r(53),O=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={highlighted:s.props.highlighted},s}return Object(l.a)(r,[{key:"toggleHighlight",value:function(){this.setState((function(t){return{highlighted:!t.highlighted}})),this.props.highlightExplanation()}},{key:"componentDidUpdate",value:function(t){t.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}},{key:"render",value:function(){var t=this.props,e=t.value,r=t.status;return Object(m.jsx)(x.a,{className:"m-0 p-0",style:{color:"involved"===r?"blue":"negative"===r?"red":"positive"===r?"green":"black",textDecoration:"negative"===r?"line-through":"none",fontWeight:"positive"===r?"bolder":"normal",fontStyle:"involved"===r?"italic":"normal"},onMouseEnter:this.toggleHighlight.bind(this),onMouseLeave:this.toggleHighlight.bind(this),children:e})}}]),r}(i.a.Component),v=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var t=this.props.borders?this.props.borders:{border:"2px solid lightgray",marginBottom:"-2px",marginLeft:"-2px"},e=this.props.margin?this.props.margin:{},r=null,s=null;return this.props.background?this.props.background.length>1?(r=this.props.background[0],s=this.props.background[1]):r=this.props.background[0]:r=this.props.background,Object(m.jsx)(x.a,{className:"m-0 p-0",children:Object(m.jsx)("div",{style:{backgroundImage:s},children:Object(m.jsxs)("div",{style:Object(d.a)(Object(d.a)(Object(d.a)({},t),e),{},{display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:r,backgroundSize:"100% 100%"}),children:[this.props.cornerNumber&&Object(m.jsx)("div",{style:Object(d.a)({position:"absolute",fontWeight:"bolder",color:"white",backgroundColor:"#0275d8",borderRadius:"10px",minWidth:"1vw",fontSize:"0.8vw",paddingRight:"1px",paddingLeft:"1px",zIndex:"2"},this.props.cornerNumber.style),children:this.props.cornerNumber.value}),this.props.rightLabel&&Object(m.jsx)("div",{style:{position:"absolute",top:"35%",right:"-5%",fontSize:"2vw",zIndex:"2"},children:this.props.rightLabel}),this.props.bottomLabel&&Object(m.jsx)("div",{style:{position:"absolute",bottom:"-15%",right:"42%",fontSize:"2vw"},children:this.props.bottomLabel}),Object(m.jsxs)("div",{style:Object(d.a)(Object(d.a)({},this.props.innerBorders),{},{padding:"0px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),children:[this.props.children,Object(m.jsx)("div",{style:{display:"block",paddingBottom:"100%"}})]})]})})})}}]),r}(i.a.Component),y=r(92),k=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){return Object(m.jsx)(y.a,{style:this.props.style,className:"p-0 m-0 d-flex flex-direction-row align-items-center justify-content-center",children:this.props.children})}}]),r}(i.a.Component),w=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={highlighted:s.props.highlighted},s}return Object(l.a)(r,[{key:"isSingleton",value:function(){var t=this.props.cellContent.cellRows;return 1===t.length&&1===t[0].cellValues.length}},{key:"getSingletonValue",value:function(){return this.props.cellContent.cellRows[0].cellValues[0].value}},{key:"componentDidUpdate",value:function(t){t.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}},{key:"highlight",value:function(t){this.props.highlight(t)}},{key:"chooseBackground",value:function(){var t,e=this.props,r=e.cellContent,s=e.literalBackgrounds,i=e.cellBackground,n=this.state.highlighted;t=r.cellRows.some((function(t){return t.cellValues.some((function(t){return t.explanations.includes(n.toString())}))}))?"linear-gradient(cornsilk, cornsilk)":"";var a=this.isSingleton(),o=this.getSingletonValue();return s&&a?[s[o.toString()],t]:i?[i,t]:[t]}},{key:"getFontSize",value:function(t){var e=this.props.literalSize;return e?(e*t).toString()+"vw":t.toString()+"vw"}},{key:"isHidden",value:function(t){var e=this.props.hiddenLiterals;return e&&e.includes(t)}},{key:"render",value:function(){var t=this,e=this.props,r=e.cellContent,s=e.cellBorders,i=e.cellInnerBorders,n=e.cellMargin,a=e.cornerNumber,o=e.rightLabel,l=e.bottomLabel,c=e.literalSize,h=this.state.highlighted,u=this.isSingleton(),d=this.getSingletonValue();return Object(m.jsx)(v,{background:this.chooseBackground(),borders:s,innerBorders:i,margin:n,size:c,cornerNumber:a,rightLabel:o,bottomLabel:l,children:u?!this.isHidden(d)&&Object(m.jsx)("h1",{style:{fontSize:this.getFontSize(2)},children:d}):Object(m.jsx)(p.a,{fluid:!0,className:"p-0 align-items-center",children:r.cellRows.map((function(e,r){return Object(m.jsx)(k,{style:{fontSize:t.getFontSize(1)},children:e.cellValues.map((function(e,r){return Object(m.jsx)(O,{value:e.value,status:e.status,highlighted:e.explanations.includes(h.toString()),highlightExplanation:function(){return t.highlight(e.explanations)}},r)}))},r)}))})})}}]),r}(i.a.Component),S=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"getIndex",value:function(t,e,r){return t?t[e][r]:null}},{key:"render",value:function(){var t=this,e=this.props,r=e.highlighted,s=e.highlight,i=e.rows,n=e.literalBackgrounds,a=e.cellBorders,o=e.cellInnerBorders,l=e.cellBackgrounds,c=e.cellMargin,h=e.literalSize,u=e.cornerNumbers,d=e.rightLabels,b=e.bottomLabels,j=e.hiddenLiterals,f=e.rowsums,O=e.endrowsums,y=e.colsums,S=e.endcolsums,C=e.startrows,B=e.startcols;return Object(m.jsx)(g.a,{className:"mt-3 p-5",children:Object(m.jsxs)(p.a,{fluid:!0,style:{minWidth:"400px",padding:"0px"},children:[Object(m.jsxs)(k,{children:[Object(m.jsx)(x.a,{xs:1,className:"m-0 p-0"}),B&&B.map((function(t){return Object(m.jsx)(x.a,{className:"m-0 p-0"})})),f&&Object(m.jsx)(x.a,{className:"m-0 p-0"}),i[0].cells.map((function(t,e){return Object(m.jsx)(x.a,{className:"m-0 p-0",children:Object(m.jsx)("small",{className:"text-muted",children:e+1})},e)})),O&&Object(m.jsx)(x.a,{className:"m-0 p-0"})]}),C&&C.map((function(t){return Object(m.jsxs)(k,{children:[Object(m.jsx)(x.a,{xs:1,className:"m-0 p-0"}),B&&B.map((function(t){return Object(m.jsx)(v,{})})),t.map((function(t,e){return Object(m.jsx)(v,{children:Object(m.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:t})})})),O&&Object(m.jsx)(v,{})]})})),y&&Object(m.jsxs)(k,{children:[Object(m.jsx)(x.a,{xs:1,className:"m-0 p-0"}),Object(m.jsx)(v,{}),y.map((function(t,e){return Object(m.jsx)(v,{children:Object(m.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:t})})})),O&&Object(m.jsx)(v,{})]}),i.map((function(e,i){return Object(m.jsxs)(k,{children:[Object(m.jsx)(x.a,{xs:1,className:"m-0 p-0",children:Object(m.jsx)("small",{className:"text-muted",children:i+1})},i),B&&B.map((function(t){return Object(m.jsx)(v,{children:Object(m.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:t[i]})})})),f&&Object(m.jsx)(v,{children:Object(m.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:f[i]})}),e.cells.map((function(e,p){return Object(m.jsx)(w,{cellContent:e,row:i,column:p,highlighted:r,highlight:s,cellBorders:t.getIndex(a,i,p),cellInnerBorders:t.getIndex(o,i,p),cellBackground:t.getIndex(l,i,p),cornerNumber:t.getIndex(u,i,p),rightLabel:t.getIndex(d,i,p),bottomLabel:t.getIndex(b,i,p),cellMargin:c,literalBackgrounds:n,literalSize:h,hiddenLiterals:j})})),O&&Object(m.jsx)(v,{children:Object(m.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:O[i]})})]},i)})),S&&Object(m.jsxs)(k,{children:[Object(m.jsx)(x.a,{xs:1,className:"m-0 p-0"}),Object(m.jsx)(v,{}),S.map((function(t,e){return Object(m.jsx)(v,{children:Object(m.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:t})})})),O&&Object(m.jsx)(v,{})]})]})})}}]),r}(i.a.Component),C=r(98),B=r(97),N=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={highlighted:s.props.highlighted},s}return Object(l.a)(r,[{key:"highlight",value:function(){this.setState({highlighted:!0}),this.props.highlight()}},{key:"deHighlight",value:function(){this.setState({highlighted:!1}),this.props.highlight()}},{key:"componentDidUpdate",value:function(t){t.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}},{key:"render",value:function(){var t=this.state.highlighted?{backgroundColor:"cornsilk"}:null,e=this.props,r=e.decision,s=e.reason,i=e.index;return Object(m.jsxs)(B.a.Item,{style:t,onMouseEnter:this.highlight.bind(this),onMouseLeave:this.deHighlight.bind(this),children:[r,Object(m.jsx)("br",{}),s]},i)}}]),r}(i.a.Component),L=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(){return Object(o.a)(this,r),e.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var t=this,e=this.props,r=e.simpleDeductions,s=e.deduction,n=e.otherChoices,a=e.smallestMUSSize;return Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(g.a,{className:"mt-3",children:r?Object(m.jsxs)(C.a,{defaultActiveKey:"1",children:[Object(m.jsxs)(g.a.Header,{children:[Object(m.jsxs)("h5",{children:["Made ",r.length," simple deductions."]}),Object(m.jsx)(C.a.Toggle,{as:j.a,variant:"link",eventKey:"0",children:"Show/Hide"})]}),Object(m.jsx)(C.a.Collapse,{eventKey:"0",children:Object(m.jsx)(B.a,{style:{maxHeight:"60vh",overflowY:"scroll"},children:r.map((function(e,r){return Object(m.jsx)(N,{highlighted:t.props.highlighted.includes(r.toString()),decision:e.decision,reason:e.reason,index:r,highlight:function(){return t.props.highlight(r)}},r)}))})})]}):s&&Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(g.a.Header,{children:Object(m.jsx)("h5",{children:"Made the following deduction:"})}),Object(m.jsxs)(g.a.Body,{children:[Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("b",{children:s.decision})}),Object(m.jsx)(B.a,{style:{maxHeight:"75vh",overflowY:"scroll"},children:s.reason.map((function(e,r){return Object(m.jsx)(N,{highlighted:t.props.highlighted.includes(r.toString()),reason:e,index:r,highlight:function(){return t.props.highlight(r)}},r)}))})]})]})}),n&&Object(m.jsxs)(g.a,{className:"mt-3",children:[Object(m.jsx)(g.a.Header,{children:Object(m.jsxs)("b",{children:["Found ",n.length+1," choices in total for this step:"]})}),Object(m.jsxs)(g.a.Body,{children:[Object(m.jsxs)("div",{className:"mb-3",children:["See the alternative deductions with MUS size ",a,":"]}),Object(m.jsx)(f,{stepName:"Alt",className:"p-3",setCurrentStep:this.props.setAlternative,maxSteps:n.length,currentStep:this.props.currentAlternative}),Object(m.jsx)("div",{children:Object(m.jsx)("small",{className:"text-muted",children:"(Note: different MUSs may result in deductions that look identical)"})})]})]})]})}}]),r}(i.a.Component),E=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={x:s.props.params.x,y:s.props.params.y,colsums:Object.values(s.props.params.colsums),rowsums:Object.values(s.props.params.rowsums),treecount:s.props.params.treecount},s}return Object(l.a)(r,[{key:"getBackgrounds",value:function(){for(var t={},e=1;e<=this.state.treecount;e++)t["-"+e.toString()]="url(images/tree.png)",t[e.toString()]="url(images/tent.png)";return t}},{key:"getCellBorders",value:function(){for(var t=[],e=0;e<this.state.x;e++){t[e]=[];for(var r=0;r<this.state.y;r++)t[e].push({borderTop:0===e?"2px solid black":"2px solid lightgray",borderBottom:e===this.state.x-1?"2px solid black":"2px solid lightgray",borderLeft:0===r?"2px solid black":"2px solid lightgray",borderRight:r===this.state.y-1?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,colsums:this.state.colsums,rowsums:this.state.rowsums,literalBackgrounds:this.getBackgrounds(),cellBorders:this.getCellBorders()},this.props.key)}}]),r}(i.a.Component),z=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={},s}return Object(l.a)(r,[{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows},this.props.key)}}]),r}(i.a.Component),I=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={grid:Object.values(s.props.params.grid).map((function(t){return Object.values(t)})),hints:Object.values(s.props.params.hints)},s}return Object(l.a)(r,[{key:"getCellBorders",value:function(){for(var t=[],e=0;e<9;e++){t[e]=[];for(var r=0;r<9;r++)t[e].push({borderTop:e%3===0?"2px solid black":"2px solid lightgray",borderBottom:8===e?"2px solid black":"2px solid lightgray",borderLeft:r%3===0?"2px solid black":"2px solid lightgray",borderRight:8===r?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return t}},{key:"getCellInnerBorders",value:function(){for(var t=[],e=this.state.grid,r=0;r<9;r++){t[r]=[];for(var s=0;s<9;s++)t[r].push({borderTop:0===r||e[r-1][s]!==e[r][s]?"2px dashed black":"2px dashed white",borderBottom:8===r||e[r+1][s]!==e[r][s]?"2px dashed black":"2px dashed white",borderLeft:0===s||e[r][s-1]!==e[r][s]?"2px dashed black":"2px dashed white",borderRight:8===s||e[r][s+1]!==e[r][s]?"2px dashed black":"2px dashed white",margin:"3px"})}return t}},{key:"getCornerNumbers",value:function(){for(var t=[],e=this.state,r=e.hints,s=e.grid,i=0,n=0;n<9;n++){t[n]=[];for(var a=0;a<9;a++)s[n][a]===i+1?(t[n].push({value:r[i],style:{top:"0%",left:"0%"}}),i++):t[n].push({value:null,style:{top:"0%",left:"0%"}})}return t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,colsums:this.state.colsums,rowsums:this.state.rowsums,cellBorders:this.getCellBorders(),cellInnerBorders:this.getCellInnerBorders(),literalSize:.7,cornerNumbers:this.getCornerNumbers()},this.props.key)}}]),r}(i.a.Component),R=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={x:s.props.params.x_max,y:s.props.params.y_max,rowsums:Object.values(s.props.params.horzsums).map((function(t){return Object.values(t)})),colsums:Object.values(s.props.params.vertsums).map((function(t){return Object.values(t)})),blanks:Object.values(s.props.params.blanks).map((function(t){return Object.values(t)}))},s}return Object(l.a)(r,[{key:"getDiagonalGradient",value:function(t,e){return"linear-gradient(to bottom left, ".concat(t,", ").concat(t," 49%, lightgray 49%, lightgray 51%, ").concat(e," 51%, ").concat(e,")")}},{key:"getBackgrounds",value:function(){for(var t=this.state,e=t.rowsums,r=t.colsums,s=t.blanks,i=[],n=0;n<this.state.x;n++){i[n]=[];for(var a=0;a<this.state.y;a++)0!==e[n][a]?0!==r[n][a]?i[n].push(this.getDiagonalGradient("white","white")):i[n].push(this.getDiagonalGradient("white","lightblue")):0!==r[n][a]?i[n].push(this.getDiagonalGradient("lightblue","white")):0===s[n][a]?i[n].push("linear-gradient(lightblue, lightblue)"):i[n].push("none")}return i}},{key:"getCornerNumbers",value:function(){for(var t=[],e=this.state,r=e.rowsums,s=e.colsums,i=e.x,n=e.y,a={fontWeight:"bolder",color:"gray",backgroundColor:"none",fontSize:"1.4vw"},o=0;o<i;o++){t[o]=[];for(var l=0;l<n;l++)0!==r[o][l]?t[o].push({value:r[o][l],style:Object(d.a)({top:"20%",right:"20%"},a)}):o>0&&0!==s[o-1][l]?t[o].push({value:s[o-1][l],style:Object(d.a)({top:"-30%",left:"20%"},a)}):t[o].push({value:null,style:Object(d.a)({top:"-30%",left:"20%"},a)})}return t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,cellBackgrounds:this.getBackgrounds(),cornerNumbers:this.getCornerNumbers(),hiddenLiterals:[0]},this.props.key)}}]),r}(i.a.Component),D=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={grid:Object.values(s.props.params.blocks).map((function(t){return Object.values(t)})),gridSize:s.props.params.grid},s}return Object(l.a)(r,[{key:"getCellBorders",value:function(){for(var t=[],e=this.state,r=e.grid,s=e.gridSize,i=0;i<s;i++){t[i]=[];for(var n=0;n<s;n++)t[i].push({borderTop:0===i||r[i-1][n]!==r[i][n]?"2px solid black":"2px solid lightgray",borderBottom:i===s-1||r[i+1][n]!==r[i][n]?"2px solid black":"2px solid lightgray",borderLeft:0===n||r[i][n-1]!==r[i][n]?"2px solid black":"2px solid lightgray",borderRight:n===s-1||r[i][n+1]!==r[i][n]?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return t}},{key:"getBackgrounds",value:function(){return{1:"url(images/star.png)"}}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,colsums:this.state.colsums,rowsums:this.state.rowsums,cellBorders:this.getCellBorders(),literalBackgrounds:this.getBackgrounds()},this.props.key)}}]),r}(i.a.Component),M=r(44),T=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={lessThans:Object.values(s.props.params.lt).map((function(t){return Object.values(t)})),size:s.props.params.SIZE},s}return Object(l.a)(r,[{key:"getRightLabels",value:function(){for(var t=[],e=this.state,r=e.size,s=e.lessThans,i=0;i<r;i++){t[i]=[];for(var n=0;n<r;n++)t[i].push(null)}var a,o=Object(M.a)(s);try{for(o.s();!(a=o.n()).done;){var l=a.value,c=l[0],h=l[1],u=l[2],p=l[3];c===u&&(h<p?t[c-1][h-1]="<":t[u-1][p-1]=">")}}catch(d){o.e(d)}finally{o.f()}return t}},{key:"getBottomLabels",value:function(){for(var t=[],e=this.state,r=e.size,s=e.lessThans,i=0;i<r;i++){t[i]=[];for(var n=0;n<r;n++)t[i].push(null)}var a,o=Object(M.a)(s);try{for(o.s();!(a=o.n()).done;){var l=a.value,c=l[0],h=l[1],u=l[2],p=l[3];h===p&&(c<u?t[c-1][h-1]="\u2227":t[u-1][p-1]="\u2228")}}catch(d){o.e(d)}finally{o.f()}return t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,cellMargin:{margin:"20px"},rightLabels:this.getRightLabels(),bottomLabels:this.getBottomLabels()},this.props.key)}}]),r}(i.a.Component),U=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={colsums:Object.values(s.props.params.colsums),rowsums:Object.values(s.props.params.rowsums),grid:Object.values(s.props.params.therms).map((function(t){return Object.values(t)}))},s}return Object(l.a)(r,[{key:"getBackgrounds",value:function(){for(var t=this.state.grid,e=[],r=this.state.grid.length,s=this.state.grid[0].length,i=0;i<r;i++){e[i]=[];for(var n=0;n<s;n++){var a=Math.floor(t[i][n]/10),o=i>0?Math.floor(t[i-1][n]/10):null,l=i<r-1?Math.floor(t[i+1][n]/10):null,c=n>0?Math.floor(t[i][n-1]/10):null,h=n<s-1?Math.floor(t[i][n+1]/10):null;t[i][n]%10===1?o===a?e[i].push("url(images/themHeadN.png)"):c===a?e[i].push("url(images/themHeadW.png)"):h===a?e[i].push("url(images/themHeadE.png)"):l===a&&e[i].push("url(images/themHeadS.png)"):o===a&&l!==a?e[i].push("url(images/themTipS.png)"):l===a&&o!==a?e[i].push("url(images/themTipN.png)"):o===a&&l===a?e[i].push("url(images/themV.png)"):h===a&&c!==a?e[i].push("url(images/themTipW.png)"):c===a&&h!==a?e[i].push("url(images/themTipE.png)"):h===a&&c===a&&e[i].push("url(images/themH.png)")}}return e}},{key:"getCellBorders",value:function(){for(var t=[],e=0;e<this.state.grid.length;e++){t[e]=[];for(var r=0;r<this.state.grid[0].length;r++)t[e].push({borderTop:0===e?"2px solid black":"2px solid lightgray",borderBottom:e===this.state.x-1?"2px solid black":"2px solid lightgray",borderLeft:0===r?"2px solid black":"2px solid lightgray",borderRight:r===this.state.y-1?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,cellBackgrounds:this.getBackgrounds(),highlighted:this.props.highlighted,colsums:this.state.colsums,rowsums:this.state.rowsums,rows:this.props.rows,cellBorders:this.getCellBorders()},this.props.key)}}]),r}(i.a.Component),A=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={size:s.props.params.SIZE,rowsums:Object.values(s.props.params.CLUES[1]).map((function(t){return 0===t?null:t})),colsums:Object.values(s.props.params.CLUES[2]).map((function(t){return 0===t?null:t})),endrowsums:Object.values(s.props.params.CLUES[3]).map((function(t){return 0===t?null:t})),endcolsums:Object.values(s.props.params.CLUES[4]).map((function(t){return 0===t?null:t}))},s}return Object(l.a)(r,[{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,colsums:this.state.colsums,endcolsums:this.state.endcolsums,rowsums:this.state.rowsums,endrowsums:this.state.endrowsums},this.props.key)}}]),r}(i.a.Component),H=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={grid:Object.values(s.props.params.presetvals).map((function(t){return Object.values(t)})),operations:Object.values(s.props.params.op),opMap:{1:"+",2:"-",3:"\xd7"}},s}return Object(l.a)(r,[{key:"getCellBorders",value:function(){for(var t=[],e=this.state.grid,r=0;r<e.length;r++){t[r]=[];for(var s=0;s<e[0].length;s++)t[r].push({borderTop:-2===e[r][s]?"2px solid transparent":"2px solid lightgray",borderBottom:-2===e[r][s]?"2px solid transparent":"2px solid lightgray",borderLeft:-2===e[r][s]?"2px solid transparent":"2px solid lightgray",borderRight:-2===e[r][s]?"2px solid transparent":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return t}},{key:"getRightLabels",value:function(){for(var t=[],e=this.state,r=e.grid,s=e.opMap,i=e.operations,n=0;n<r.length;n++){t[n]=[];for(var a=0;a<r[0].length;a++)t[n].push(null)}return t[0][1]="=",t[0][5]="=",t[1][3]="=",t[3][1]="=",t[3][5]="=",t[5][1]="=",t[5][5]="=",t[8][1]="=",t[8][5]="=",t[0][0]=s[i[0]],t[0][4]=s[i[1]],t[1][2]=s[i[6]],t[3][0]=s[i[7]],t[3][4]=s[i[8]],t[5][0]=s[i[11]],t[5][4]=s[i[12]],t[6][2]=s[i[17]],t[8][0]=s[i[18]],t[8][4]=s[i[19]],t}},{key:"getBottomLabels",value:function(){for(var t=[],e=this.state,r=e.grid,s=e.opMap,i=e.operations,n=0;n<r.length;n++){t[n]=[];for(var a=0;a<r[0].length;a++)t[n].push(null)}return t[1][0]="=",t[1][2]="=",t[1][4]="=",t[1][6]="=",t[4][1]="=",t[4][5]="=",t[6][0]="=",t[6][2]="=",t[6][4]="=",t[6][6]="=",t[0][0]=s[i[2]],t[0][2]=s[i[3]],t[0][4]=s[i[4]],t[0][6]=s[i[5]],t[3][1]=s[i[9]],t[3][5]=s[i[10]],t[5][0]=s[i[13]],t[5][2]=s[i[14]],t[5][4]=s[i[15]],t[5][6]=s[i[16]],t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,hiddenLiterals:[-2],cellBorders:this.getCellBorders(),rightLabels:this.getRightLabels(),bottomLabels:this.getBottomLabels()},this.props.key)}}]),r}(i.a.Component),F=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={rowcounts:Object.values(s.props.params.rowcounts).map((function(t){return Object.values(t)})),colcounts:Object.values(s.props.params.colcounts).map((function(t){return Object.values(t)}))},s}return Object(l.a)(r,[{key:"getBackgrounds",value:function(){var t={0:"linear-gradient(white, white)",1:"linear-gradient(black, black)"};return t}},{key:"transpose",value:function(t){return t[0].map((function(e,r){return t.map((function(t){return t[r]}))}))}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,literalBackgrounds:this.getBackgrounds(),hiddenLiterals:[0,1],startrows:this.transpose(this.state.colcounts),startcols:this.transpose(this.state.rowcounts)},this.props.key)}}]),r}(i.a.Component),V=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={grid:Object.values(s.props.params.grid).map((function(t){return Object.values(t)})),hints:s.props.params.hints},s}return Object(l.a)(r,[{key:"getCellBorders",value:function(){for(var t=[],e=0;e<9;e++){t[e]=[];for(var r=0;r<9;r++)t[e].push({borderTop:e%3===0?"2px solid black":"2px solid lightgray",borderBottom:8===e?"2px solid black":"2px solid lightgray",borderLeft:r%3===0?"2px solid black":"2px solid lightgray",borderRight:8===r?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return t}},{key:"render",value:function(){return Object(m.jsx)(S,{highlight:this.props.highlight,highlighted:this.props.highlighted,rows:this.props.rows,colsums:this.state.colsums,rowsums:this.state.rowsums,cellBorders:this.getCellBorders(),literalSize:.7},this.props.key)}}]),r}(i.a.Component),J=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).state={currentStep:0,highlightedLiterals:-1,highlightedExplanations:[],currentAlternative:0,type:s.props.type,params:s.props.params,inputObject:s.props.inputObject},s}return Object(l.a)(r,[{key:"highlightLiteral",value:function(t){this.setState((function(e){return{highlightedLiterals:e.highlightedLiterals===t?-1:t}}))}},{key:"highlightExplanation",value:function(t){this.setState((function(e){return{highlightedExplanations:JSON.stringify(e.highlightedExplanations)===JSON.stringify(t)?[]:t}}))}},{key:"setCurrentStep",value:function(t){this.setState({currentStep:t,currentAlternative:0})}},{key:"setAlternative",value:function(t){this.setState({currentAlternative:t})}},{key:"chooseBoard",value:function(t){switch(this.state.type){case"tents.eprime":return Object(m.jsx)(E,Object(d.a)({},t));case"binairo.eprime":return Object(m.jsx)(z,Object(d.a)({},t));case"nice_killer.eprime":return Object(m.jsx)(I,Object(d.a)({},t));case"star-battle.eprime":return Object(m.jsx)(D,Object(d.a)({},t));case"kakuro.eprime":return Object(m.jsx)(R,Object(d.a)({},t));case"nfutoshiki.eprime":return Object(m.jsx)(T,Object(d.a)({},t));case"thermometer.eprime":return Object(m.jsx)(U,Object(d.a)({},t));case"skyscrapers.eprime":return Object(m.jsx)(A,Object(d.a)({},t));case"garam.eprime":return Object(m.jsx)(H,Object(d.a)({},t));case"nonogram.eprime":return Object(m.jsx)(F,Object(d.a)({},t));case"x-sums.eprime":return Object(m.jsx)(V,Object(d.a)({},t));default:return Object(m.jsx)(S,Object(d.a)({},t))}}},{key:"render",value:function(){var t=0===this.state.currentAlternative?this.state.inputObject[this.state.currentStep]:this.state.inputObject[this.state.currentStep].otherChoices[this.state.currentAlternative-1],e={params:this.state.params,highlight:this.highlightExplanation.bind(this),key:this.state.highlightedLiterals,highlighted:this.state.highlightedLiterals,rows:t.puzzleState.matrices[0].rows};return Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(f,{className:"mt-3 p-3",stepName:"step",setCurrentStep:this.setCurrentStep.bind(this),maxSteps:this.state.inputObject.length-1,currentStep:this.state.currentStep}),Object(m.jsxs)(y.a,{className:"mb-4",children:[Object(m.jsx)(x.a,{xs:12,md:8,lg:8,xl:6,children:this.chooseBoard(e)}),Object(m.jsxs)(x.a,{children:[t.skippedDeductions&&Object(m.jsx)(g.a,{className:"mt-3",children:Object(m.jsx)(g.a.Body,{children:Object(m.jsx)("small",{children:"Skipped some obvious deductions."})})}),Object(m.jsx)(L,{highlight:this.highlightLiteral.bind(this),simpleDeductions:t.simpleDeductions,deduction:t.deduction,highlighted:this.state.highlightedExplanations,otherChoices:this.state.inputObject[this.state.currentStep].otherChoices,smallestMUSSize:this.state.inputObject[this.state.currentStep].smallestMUSSize,setAlternative:this.setAlternative.bind(this),currentAlternative:this.state.currentAlternative})]})]})]})}}]),r}(i.a.Component),G=r(14),W=r.n(G),P=r(18),K=r(95),_=r(100),Y=r(94),Z=r(40),q=r.n(Z);function Q(){return X.apply(this,arguments)}function X(){return(X=Object(P.a)(W.a.mark((function t(){var e;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.get("examples");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t){return tt.apply(this,arguments)}function tt(){return(tt=Object(P.a)(W.a.mark((function t(e){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.get("examples/".concat(e));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t,e,r,s){return rt.apply(this,arguments)}function rt(){return(rt=Object(P.a)(W.a.mark((function t(e,r,s,i){var n;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.post("run",{eprimename:e,eprime:r,paramname:s,param:i});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var st=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).uploadFile=function(){var t=Object(P.a)(W.a.mark((function t(e){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),(r=new FileReader).onload=function(){var t=Object(P.a)(W.a.mark((function t(e){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{r=e.target.result,s.props.onUpload(r,s.fileInput.current.files[0].name)}catch(i){s.props.onError()}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.readAsText(e.target.files[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.fileInput=i.a.createRef(),s}return Object(l.a)(r,[{key:"render",value:function(){var t=this;return Object(m.jsx)("input",{disabled:this.props.disabled,type:"file",ref:this.fileInput,onChange:function(e){return t.uploadFile(e)}})}}]),r}(i.a.Component),it=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(t){var s;return Object(o.a)(this,r),(s=e.call(this,t)).componentDidUpdate=function(){s.state.isRunning?window.onbeforeunload=function(){return!0}:window.onbeforeunload=void 0},s.state={isLoadingExamples:!0,examples:[],eprime:null,eprimename:null,param:null,paramname:null,error:"",isRunning:!1},s}return Object(l.a)(r,[{key:"componentDidMount",value:function(){var t=this;Q().then((function(e){return t.setState({examples:e},(function(){return t.setState({isLoadingExamples:!1})}))}))}},{key:"handleGo",value:function(){var t=Object(P.a)(W.a.mark((function t(){var e,r,s,i,n,a;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.state.eprime&&this.state.param){t.next=3;break}return this.setError("Please upload .eprime and .param files to run Demystify."),t.abrupt("return");case 3:return this.setState({isRunning:!0}),e=this.state,r=e.eprimename,s=e.eprime,i=e.paramname,n=e.param,t.prev=5,t.next=8,et(r,s,i,n);case 8:a=t.sent,this.props.setInput(a),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),this.setError("There was a problem running Demystify on the server. (Currently most things are too long)."),this.setState({isRunning:!1});case 16:case"end":return t.stop()}}),t,this,[[5,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"setError",value:function(t){this.setState({error:t})}},{key:"getExamples",value:function(){var t=Object(P.a)(W.a.mark((function t(){var e,r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q();case 2:return e=t.sent,t.prev=3,r=e.map((function(t){return Object(m.jsx)(K.a.Item,{children:t})})),t.abrupt("return",r);case 8:return t.prev=8,t.t0=t.catch(3),t.abrupt("return",Object(m.jsx)(_.a,{className:"m-0",variant:"warning",children:"Error fetching examples."}));case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"chooseExample",value:function(){var t=Object(P.a)(W.a.mark((function t(e){var r;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$(e);case 2:r=t.sent,this.props.setInput(r);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(m.jsx)("h1",{className:"mt-3",children:"Demystify Visualiser"}),Object(m.jsx)("img",{className:"mt-3",style:{width:"100px"},alt:"demystify logo",src:"favicon.ico"}),Object(m.jsx)(g.a,{as:y.a,className:"mt-3 pt-3 w-75",children:Object(m.jsxs)(B.a,{variant:"flush",children:[Object(m.jsx)(B.a.Item,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)("b",{className:"mx-4",children:"  Load Demystify output from JSON file:"}),Object(m.jsx)(st,{disabled:this.state.isRunning,onUpload:function(e){return t.props.setInput(JSON.parse(e))},onError:function(){return t.setError("Could not read the input file. Ensure it is a JSON file produced by Demystify.")}})]})}),Object(m.jsx)(B.a.Item,{children:Object(m.jsxs)(y.a,{children:[Object(m.jsx)("b",{className:"mx-4 pt-2",children:"View a pre-generated example:"}),Object(m.jsxs)(K.a,{onSelect:function(e){return t.chooseExample(e)},children:[Object(m.jsx)(K.a.Toggle,{disabled:this.state.isRunning,variant:"success",id:"dropdown-basic",children:"Examples"}),Object(m.jsx)(K.a.Menu,{children:this.state.isLoadingExamples?Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)(Y.a,{animation:"border"})}):this.state.examples.map((function(e){return Object(m.jsx)(K.a.Item,{eventKey:e,onClick:function(){return t.chooseExample(e)},children:e},e)}))})]})]})}),Object(m.jsxs)(B.a.Item,{children:[Object(m.jsx)(y.a,{children:Object(m.jsx)("b",{className:"mx-4 mb-4",children:"Run Demystify live:"})}),Object(m.jsxs)(y.a,{children:[Object(m.jsx)("p",{className:"mx-4",children:"Puzzle description (.eprime): "}),Object(m.jsx)(st,{disabled:this.state.isRunning,onUpload:function(e,r){return t.setState({eprime:e,eprimename:r})},onError:function(){return t.setError("Could not read the input file. Ensure it is a valid .eprime file.")}})]}),Object(m.jsxs)(y.a,{children:[Object(m.jsx)("p",{className:"mx-4",children:"Puzzle instance (.param): "}),Object(m.jsx)(st,{disabled:this.state.isRunning,onUpload:function(e,r){return t.setState({param:e,paramname:r})},onError:function(){return t.setError("Could not read the input file. Ensure it is a valid .param file.")}})]}),Object(m.jsxs)(y.a,{children:[Object(m.jsx)(j.a,{disabled:this.state.isRunning,className:"mx-4",variant:"success",onClick:this.handleGo.bind(this),children:"Go"}),this.state.isRunning&&Object(m.jsxs)(i.a.Fragment,{children:[Object(m.jsx)(Y.a,{animation:"border"}),Object(m.jsx)("p",{className:"ml-4",children:"Demystify is running... This may take some time to complete."})]})]})]})]})}),this.state.error.length>0&&Object(m.jsx)(_.a,{variant:"warning",className:"mt-3 p-4 w-75 text-center",children:this.state.error})]})}}]),r}(i.a.Component),nt=function(t){Object(h.a)(r,t);var e=Object(u.a)(r);function r(){var t;Object(o.a)(this,r);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))).state={inputObject:[],type:"",params:{},error:!1},t.render=function(){return Object(m.jsx)(p.a,{fluid:!0,style:{textAlign:"center"},children:0===t.state.inputObject.length||t.state.error?Object(m.jsx)(it,{setInput:t.setJSONInput.bind(Object(c.a)(t))}):Object(m.jsx)(J,{inputObject:t.state.inputObject,type:t.state.type,params:t.state.params})})},t}return Object(l.a)(r,[{key:"setJSONInput",value:function(t){var e=this;this.setState({inputObject:t.steps,type:t.name,params:t.params},(function(){return!(e.state.inputObject&&e.state.type&&e.state.params)&&e.setError()}))}},{key:"setError",value:function(){this.setState({error:!0})}},{key:"conponentDidUpdate",value:function(t,e){e.error&&this.setState({error:!1})}}]),r}(i.a.Component),at=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,101)).then((function(e){var r=e.getCLS,s=e.getFID,i=e.getFCP,n=e.getLCP,a=e.getTTFB;r(t),s(t),i(t),n(t),a(t)}))};r(86);a.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(nt,{})}),document.getElementById("root")),at()}},[[87,1,2]]]);
//# sourceMappingURL=main.5d46dafd.chunk.js.map