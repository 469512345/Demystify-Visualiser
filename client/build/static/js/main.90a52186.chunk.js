(this["webpackJsonpdemystify-visualiser"]=this["webpackJsonpdemystify-visualiser"]||[]).push([[0],{65:function(e,t,s){},91:function(e,t,s){"use strict";s.r(t);var r=s(0),a=s.n(r),i=s(24),n=s.n(i),c=(s(65),s(7)),o=s(8),l=s(32),u=s(10),h=s(9),p=s(97),d=s(12),b=s.n(d),j=s(15),m=s(48),g=s(5),f=s(103),x=s(100),O=s(58),v=s(1),y=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(c.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={currentStep:e.props.currentStep},e}return Object(o.a)(s,[{key:"nextStep",value:function(){var e=this.state.currentStep+1;e<=this.props.maxSteps&&(this.setState({currentStep:e}),this.props.setCurrentStep(e))}},{key:"lastStep",value:function(){var e=this.state.currentStep-1;e>=0&&(this.setState({currentStep:e}),this.props.setCurrentStep(e))}},{key:"componentDidUpdate",value:function(e){e.currentStep!==this.props.currentStep&&this.setState({currentStep:this.props.currentStep})}},{key:"render",value:function(){return Object(v.jsx)(f.a,{className:this.props.className,children:Object(v.jsxs)(x.a,{inline:!0,onSubmit:function(e){return e.preventDefault()},className:"d-flex justify-content-between",children:[Object(v.jsxs)(O.a,{disabled:0===this.state.currentStep,variant:"primary",onClick:this.lastStep.bind(this),children:["Last ",this.props.stepName]}),Object(v.jsxs)(x.a.Group,{children:[Object(v.jsxs)(x.a.Label,{className:"w-70 mr-2",children:["Current ",this.props.stepName,":"]}),Object(v.jsx)(x.a.Label,{className:"w-70 mr-2",children:this.state.currentStep+1})]}),this.props.endButton?this.props.endButton:Object(v.jsxs)(O.a,{disabled:this.state.currentStep===this.props.maxSteps,variant:"primary",onClick:this.nextStep.bind(this),children:["Next ",this.props.stepName]})]})})}}]),s}(a.a.Component),k=s(57),S=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={highlighted:r.props.highlighted},r}return Object(o.a)(s,[{key:"toggleHighlight",value:function(){this.setState((function(e){return{highlighted:!e.highlighted}})),this.props.highlightExplanation()}},{key:"componentDidUpdate",value:function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}},{key:"handleClick",value:function(){this.props.setSelectedLiteral()}},{key:"render",value:function(){var e=this.props,t=e.value,s=e.status;return Object(v.jsx)(k.a,{className:"m-0 p-0",onClick:this.handleClick.bind(this),style:{color:"involved"===s?"blue":"negative"===s?"red":"positive"===s?"green":"black",textShadow:"involved"===s?"0 0 4px #00FEFE":"positive"===s?"0 0 4px #90EE90":"none",textDecoration:"negative"===s?"line-through":"none",fontWeight:"positive"===s?"bolder":"normal",fontStyle:"involved"===s?"italic":"normal",backgroundColor:this.state.highlighted?"cornsilk":null},onMouseEnter:this.toggleHighlight.bind(this),onMouseLeave:this.toggleHighlight.bind(this),children:t})}}]),s}(a.a.Component),C=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props.borders?this.props.borders:{border:"2px solid lightgray",marginBottom:"-2px",marginLeft:"-2px"},t=this.props.margin?this.props.margin:{},s=null,r=null;return this.props.background?this.props.background.length>1?(s=this.props.background[0],r=this.props.background[1]):s=this.props.background[0]:s=this.props.background,Object(v.jsx)(k.a,{className:"m-0 p-0",children:Object(v.jsx)("div",{style:{backgroundImage:r},children:Object(v.jsxs)("div",{style:Object(g.a)(Object(g.a)(Object(g.a)({},e),t),{},{display:"flex",justifyContent:"center",alignItems:"center",backgroundImage:s,backgroundSize:"100% 100%"}),children:[this.props.cornerNumber&&Object(v.jsx)("div",{style:Object(g.a)({position:"absolute",fontWeight:"bolder",color:"white",backgroundColor:"#0275d8",borderRadius:"10px",minWidth:"1vw",fontSize:"0.8vw",paddingRight:"1px",paddingLeft:"1px",zIndex:"2"},this.props.cornerNumber.style),children:this.props.cornerNumber.value}),this.props.rightLabel&&Object(v.jsx)("div",{style:{position:"absolute",top:"35%",right:"-5%",fontSize:"2vw",zIndex:"2"},children:this.props.rightLabel}),this.props.bottomLabel&&Object(v.jsx)("div",{style:{position:"absolute",bottom:"-15%",right:"42%",fontSize:"2vw"},children:this.props.bottomLabel}),Object(v.jsxs)("div",{style:Object(g.a)(Object(g.a)({},this.props.innerBorders),{},{padding:"0px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),children:[this.props.children,Object(v.jsx)("div",{style:{display:"block",paddingBottom:"100%"}})]})]})})})}}]),s}(a.a.Component),w=s(96),N=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(v.jsx)(w.a,{style:this.props.style,className:"p-0 m-0 d-flex flex-direction-row align-items-center justify-content-center",children:this.props.children})}}]),s}(a.a.Component),L=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={highlighted:r.props.highlighted},r}return Object(o.a)(s,[{key:"isSingleton",value:function(){var e=this.props.cellContent.cellRows;return 1===e.length&&1===e[0].cellValues.length||this.containsKnown(e)}},{key:"containsKnown",value:function(e){return e.some((function(e){return e.cellValues.some((function(e){return e.markers.includes("pik")}))}))}},{key:"getSingletonValue",value:function(){var e=this.props.cellContent.cellRows;return this.containsKnown(e)?e.filter((function(e){return e.cellValues.some((function(e){return e.markers.includes("pik")}))}))[0].cellValues.filter((function(e){return e.markers.includes("pik")}))[0].value:e[0].cellValues[0].value}},{key:"componentDidUpdate",value:function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}},{key:"highlight",value:function(e){this.props.highlight(e)}},{key:"chooseBackground",value:function(){var e,t=this.props,s=t.cellContent,r=t.literalBackgrounds,a=t.cellBackground,i=this.state.highlighted;e=s.cellRows.some((function(e){return e.cellValues.some((function(e){return e.explanations.includes(i.toString())}))}))?"linear-gradient(cornsilk, cornsilk)":"";var n=this.isSingleton(),c=this.getSingletonValue();return r&&n?[r[c.toString()],e]:a?[a,e]:[e]}},{key:"getFontSize",value:function(e){var t=this.props.literalSize;return t?(t*e).toString()+"vw":e.toString()+"vw"}},{key:"isHidden",value:function(e){var t=this.props.hiddenLiterals;return t&&t.includes(e)}},{key:"render",value:function(){var e=this,t=this.props,s=t.cellContent,r=t.cellBorders,a=t.cellInnerBorders,i=t.cellMargin,n=t.cornerNumber,c=t.rightLabel,o=t.bottomLabel,l=t.literalSize,u=this.state.highlighted,h=this.isSingleton(),d=this.getSingletonValue();return Object(v.jsx)(C,{background:this.chooseBackground(),borders:r,innerBorders:a,margin:i,size:l,cornerNumber:n,rightLabel:c,bottomLabel:o,children:h?!this.isHidden(d)&&Object(v.jsx)("h1",{style:{fontSize:this.getFontSize(2)},children:d}):Object(v.jsx)(p.a,{fluid:!0,className:"p-0 align-items-center",children:s.cellRows.map((function(t,s){return Object(v.jsx)(N,{style:{fontSize:e.getFontSize(1)},children:t.cellValues.map((function(t,s){return Object(v.jsx)(S,{row:e.props.row,column:e.props.column,value:t.value,status:t.status,highlighted:t.explanations.includes(u.toString()),highlightExplanation:function(){return e.highlight(t.explanations)},setSelectedLiteral:function(){return e.props.setSelectedLiteral(e.props.row,e.props.column,t.value)}},s)}))},s)}))})})}}]),s}(a.a.Component),B=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"getIndex",value:function(e,t,s){return e?e[t][s]:null}},{key:"render",value:function(){var e=this,t=this.props,s=t.highlighted,r=t.highlight,a=t.rows,i=t.literalBackgrounds,n=t.cellBorders,c=t.cellInnerBorders,o=t.cellBackgrounds,l=t.cellMargin,u=t.literalSize,h=t.cornerNumbers,d=t.rightLabels,b=t.bottomLabels,j=t.hiddenLiterals,m=t.rowsums,g=t.endrowsums,x=t.colsums,O=t.endcolsums,y=t.startrows,S=t.startcols;return Object(v.jsx)(f.a,{className:"mt-3 p-5",children:Object(v.jsxs)(p.a,{fluid:!0,style:{minWidth:"400px",padding:"0px"},children:[Object(v.jsxs)(N,{children:[Object(v.jsx)(k.a,{xs:1,className:"m-0 p-0"}),S&&S.map((function(e){return Object(v.jsx)(k.a,{className:"m-0 p-0"})})),m&&Object(v.jsx)(k.a,{className:"m-0 p-0"}),a[0].cells.map((function(e,t){return Object(v.jsx)(k.a,{className:"m-0 p-0",children:Object(v.jsx)("small",{className:"text-muted",children:t+1})},t)})),g&&Object(v.jsx)(k.a,{className:"m-0 p-0"})]}),y&&y.map((function(e){return Object(v.jsxs)(N,{children:[Object(v.jsx)(k.a,{xs:1,className:"m-0 p-0"}),S&&S.map((function(e){return Object(v.jsx)(C,{})})),e.map((function(e,t){return Object(v.jsx)(C,{children:Object(v.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:e})})})),g&&Object(v.jsx)(C,{})]})})),x&&Object(v.jsxs)(N,{children:[Object(v.jsx)(k.a,{xs:1,className:"m-0 p-0"}),Object(v.jsx)(C,{}),x.map((function(e,t){return Object(v.jsx)(C,{children:Object(v.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:e})})})),g&&Object(v.jsx)(C,{})]}),a.map((function(t,a){return Object(v.jsxs)(N,{children:[Object(v.jsx)(k.a,{xs:1,className:"m-0 p-0",children:Object(v.jsx)("small",{className:"text-muted",children:a+1})},a),S&&S.map((function(e){return Object(v.jsx)(C,{children:Object(v.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:e[a]})})})),m&&Object(v.jsx)(C,{children:Object(v.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:m[a]})}),t.cells.map((function(t,p){return Object(v.jsx)(L,{cellContent:t,row:a,column:p,highlighted:s,highlight:r,cellBorders:e.getIndex(n,a,p),cellInnerBorders:e.getIndex(c,a,p),cellBackground:e.getIndex(o,a,p),cornerNumber:e.getIndex(h,a,p),rightLabel:e.getIndex(d,a,p),bottomLabel:e.getIndex(b,a,p),cellMargin:l,literalBackgrounds:i,literalSize:u,hiddenLiterals:j,setSelectedLiteral:e.props.setSelectedLiteral})})),g&&Object(v.jsx)(C,{children:Object(v.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:g[a]})})]},a)})),O&&Object(v.jsxs)(N,{children:[Object(v.jsx)(k.a,{xs:1,className:"m-0 p-0"}),Object(v.jsx)(C,{}),O.map((function(e,t){return Object(v.jsx)(C,{children:Object(v.jsx)("h3",{style:{fontSize:"2vw",color:"gray"},children:e})})})),g&&Object(v.jsx)(C,{})]})]})})}}]),s}(a.a.Component),I=s(101),E=s(102),z=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={highlighted:r.props.highlighted},r}return Object(o.a)(s,[{key:"highlight",value:function(){this.setState({highlighted:!0}),this.props.highlight()}},{key:"deHighlight",value:function(){this.setState({highlighted:!1}),this.props.highlight()}},{key:"componentDidUpdate",value:function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})}},{key:"render",value:function(){var e=this.state.highlighted?{backgroundColor:"cornsilk"}:null,t=this.props,s=t.decision,r=t.reason,a=t.index;return Object(v.jsxs)(E.a.Item,{style:e,onMouseEnter:this.highlight.bind(this),onMouseLeave:this.deHighlight.bind(this),children:[s,Object(v.jsx)("br",{}),r]},a)}}]),s}(a.a.Component),D=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this,t=this.props,s=t.simpleDeductions,r=t.deduction,i=t.choices,n=t.smallestMUSSize,c=t.extraChoice,o=t.boldBorder;return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(f.a,{className:"mt-3",border:o?"primary":"none",children:s?Object(v.jsxs)(I.a,{defaultActiveKey:"1",children:[Object(v.jsxs)(f.a.Header,{children:[Object(v.jsxs)("h5",{children:["Made ",s.length," simple deductions."]}),Object(v.jsx)(I.a.Toggle,{as:O.a,variant:"link",eventKey:"0",children:"Show/Hide"})]}),Object(v.jsx)(I.a.Collapse,{eventKey:"0",children:Object(v.jsx)(E.a,{style:{maxHeight:"60vh",overflowY:"scroll"},children:s.map((function(t,s){return Object(v.jsx)(z,{highlighted:e.props.highlighted.includes(s.toString()),decision:t.decision,reason:t.reason,index:s,highlight:function(){return e.props.highlight(s)}},s)}))})})]}):r&&Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(f.a.Header,{children:Object(v.jsx)("h5",{children:"Made the following deduction:"})}),Object(v.jsxs)(f.a.Body,{children:[Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("b",{children:r.decision})}),Object(v.jsx)(E.a,{style:{maxHeight:"75vh",overflowY:"scroll"},children:r.reason.map((function(t,s){return Object(v.jsx)(z,{highlighted:e.props.highlighted.includes(s.toString()),reason:t,index:s,highlight:function(){return e.props.highlight(s)}},s)}))})]})]})}),i&&Object(v.jsxs)(f.a,{className:"mt-3",children:[Object(v.jsx)(f.a.Header,{children:Object(v.jsxs)("b",{children:["Found ",c?i.length+1:i.length," ","choices in total for this step:"]})}),Object(v.jsxs)(f.a.Body,{children:[Object(v.jsxs)("div",{className:"mb-3",children:["See the alternative deductions with MUS size at least"," ",n,":"]}),Object(v.jsx)(y,{stepName:"Alt",className:"p-3",setCurrentStep:this.props.setChoice,maxSteps:c?i.length:i.length-1,currentStep:this.props.currentChoice}),Object(v.jsx)("div",{children:Object(v.jsx)("small",{className:"text-muted",children:"(Note: different MUSs may result in deductions that look identical)"})}),this.props.children]})]})]})}}]),s}(a.a.Component),F=s(104),R=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={x:r.props.params.x,y:r.props.params.y,colsums:Object.values(r.props.params.colsums),rowsums:Object.values(r.props.params.rowsums),treecount:r.props.params.treecount},r}return Object(o.a)(s,[{key:"getBackgrounds",value:function(){for(var e={},t=1;t<=this.state.treecount;t++)e["-"+t.toString()]="url(images/tree.png)",e[t.toString()]="url(images/tent.png)";return e}},{key:"getCellBorders",value:function(){for(var e=[],t=0;t<this.state.x;t++){e[t]=[];for(var s=0;s<this.state.y;s++)e[t].push({borderTop:0===t?"2px solid black":"2px solid lightgray",borderBottom:t===this.state.x-1?"2px solid black":"2px solid lightgray",borderLeft:0===s?"2px solid black":"2px solid lightgray",borderRight:s===this.state.y-1?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{colsums:this.state.colsums,rowsums:this.state.rowsums,literalBackgrounds:this.getBackgrounds(),cellBorders:this.getCellBorders()}))}}]),s}(a.a.Component),M=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={},r}return Object(o.a)(s,[{key:"getBackgrounds",value:function(){return{0:"radial-gradient(gray 60%, #000000 61%, #ffffff 66%)",1:"radial-gradient(#ffffff 60%, #000000 61%, #ffffff 66%)"}}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{literalBackgrounds:this.getBackgrounds()}))}}]),s}(a.a.Component),U=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={grid:Object.values(r.props.params.grid).map((function(e){return Object.values(e)})),hints:Object.values(r.props.params.hints)},r}return Object(o.a)(s,[{key:"getCellBorders",value:function(){for(var e=[],t=0;t<9;t++){e[t]=[];for(var s=0;s<9;s++)e[t].push({borderTop:t%3===0?"2px solid black":"2px solid lightgray",borderBottom:8===t?"2px solid black":"2px solid lightgray",borderLeft:s%3===0?"2px solid black":"2px solid lightgray",borderRight:8===s?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"getCellInnerBorders",value:function(){for(var e=[],t=this.state.grid,s=0;s<9;s++){e[s]=[];for(var r=0;r<9;r++)e[s].push({borderTop:0===s||t[s-1][r]!==t[s][r]?"2px dashed black":"2px dashed white",borderBottom:8===s||t[s+1][r]!==t[s][r]?"2px dashed black":"2px dashed white",borderLeft:0===r||t[s][r-1]!==t[s][r]?"2px dashed black":"2px dashed white",borderRight:8===r||t[s][r+1]!==t[s][r]?"2px dashed black":"2px dashed white",margin:"3px"})}return e}},{key:"getCornerNumbers",value:function(){for(var e=[],t=this.state,s=t.hints,r=t.grid,a=0,i=0;i<9;i++){e[i]=[];for(var n=0;n<9;n++)r[i][n]===a+1?(e[i].push({value:s[a],style:{top:"0%",left:"0%"}}),a++):e[i].push({value:null,style:{top:"0%",left:"0%"}})}return e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{colsums:this.state.colsums,rowsums:this.state.rowsums,cellBorders:this.getCellBorders(),cellInnerBorders:this.getCellInnerBorders(),literalSize:.7,cornerNumbers:this.getCornerNumbers()}))}}]),s}(a.a.Component),W=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={x:r.props.params.x_max,y:r.props.params.y_max,rowsums:Object.values(r.props.params.horzsums).map((function(e){return Object.values(e)})),colsums:Object.values(r.props.params.vertsums).map((function(e){return Object.values(e)})),blanks:Object.values(r.props.params.blanks).map((function(e){return Object.values(e)}))},r}return Object(o.a)(s,[{key:"getDiagonalGradient",value:function(e,t){return"linear-gradient(to bottom left, ".concat(e,", ").concat(e," 49%,       lightgray 49%, lightgray 51%, ").concat(t," 51%, ").concat(t,")")}},{key:"getBackgrounds",value:function(){for(var e=this.state,t=e.rowsums,s=e.colsums,r=e.blanks,a=[],i=0;i<this.state.x;i++){a[i]=[];for(var n=0;n<this.state.y;n++)0!==t[i][n]?0!==s[i][n]?a[i].push(this.getDiagonalGradient("white","white")):a[i].push(this.getDiagonalGradient("white","lightblue")):0!==s[i][n]?a[i].push(this.getDiagonalGradient("lightblue","white")):0===r[i][n]?a[i].push("linear-gradient(lightblue, lightblue)"):a[i].push("none")}return a}},{key:"getCornerNumbers",value:function(){for(var e=[],t=this.state,s=t.rowsums,r=t.colsums,a=t.x,i=t.y,n={fontWeight:"bolder",color:"gray",backgroundColor:"none",fontSize:"1.4vw"},c=0;c<a;c++){e[c]=[];for(var o=0;o<i;o++)0!==s[c][o]?e[c].push({value:s[c][o],style:Object(g.a)({top:"20%",right:"20%"},n)}):c>0&&0!==r[c-1][o]?e[c].push({value:r[c-1][o],style:Object(g.a)({top:"-30%",left:"20%"},n)}):e[c].push({value:null,style:Object(g.a)({top:"-30%",left:"20%"},n)})}return e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{cellBackgrounds:this.getBackgrounds(),cornerNumbers:this.getCornerNumbers(),hiddenLiterals:[0]}))}}]),s}(a.a.Component),T=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={size:r.props.params.dims,colsums:Object.values(r.props.params.col_sums),rowsums:Object.values(r.props.params.row_sums)},r}return Object(o.a)(s,[{key:"getBackgrounds",value:function(){var e={0:"linear-gradient(white, white)",1:"linear-gradient(gray, gray)"};return e}},{key:"getCellBorders",value:function(){for(var e=[],t=0;t<this.state.size;t++){e[t]=[];for(var s=0;s<this.state.size;s++)e[t].push({borderTop:0===t?"2px solid black":"2px solid lightgray",borderBottom:t===this.state.x-1?"2px solid black":"2px solid lightgray",borderLeft:0===s?"2px solid black":"2px solid lightgray",borderRight:s===this.state.y-1?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{colsums:this.state.colsums,rowsums:this.state.rowsums,literalBackgrounds:this.getBackgrounds(),cellBorders:this.getCellBorders()}))}}]),s}(a.a.Component),H=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={grid:Object.values(r.props.params.blocks).map((function(e){return Object.values(e)})),gridSize:r.props.params.grid},r}return Object(o.a)(s,[{key:"getCellBorders",value:function(){for(var e=[],t=this.state,s=t.grid,r=t.gridSize,a=0;a<r;a++){e[a]=[];for(var i=0;i<r;i++)e[a].push({borderTop:0===a||s[a-1][i]!==s[a][i]?"2px solid black":"2px solid lightgray",borderBottom:a===r-1||s[a+1][i]!==s[a][i]?"2px solid black":"2px solid lightgray",borderLeft:0===i||s[a][i-1]!==s[a][i]?"2px solid black":"2px solid lightgray",borderRight:i===r-1||s[a][i+1]!==s[a][i]?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"getBackgrounds",value:function(){return{1:"url(images/star.png)"}}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{colsums:this.state.colsums,rowsums:this.state.rowsums,cellBorders:this.getCellBorders(),literalBackgrounds:this.getBackgrounds()}))}}]),s}(a.a.Component),J=s(47),A=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={lessThans:Object.values(r.props.params.lt).map((function(e){return Object.values(e)})),size:r.props.params.SIZE},r}return Object(o.a)(s,[{key:"getRightLabels",value:function(){for(var e=[],t=this.state,s=t.size,r=t.lessThans,a=0;a<s;a++){e[a]=[];for(var i=0;i<s;i++)e[a].push(null)}var n,c=Object(J.a)(r);try{for(c.s();!(n=c.n()).done;){var o=n.value,l=o[0],u=o[1],h=o[2],p=o[3];l===h&&(u<p?e[l-1][u-1]="<":e[h-1][p-1]=">")}}catch(d){c.e(d)}finally{c.f()}return e}},{key:"getBottomLabels",value:function(){for(var e=[],t=this.state,s=t.size,r=t.lessThans,a=0;a<s;a++){e[a]=[];for(var i=0;i<s;i++)e[a].push(null)}var n,c=Object(J.a)(r);try{for(c.s();!(n=c.n()).done;){var o=n.value,l=o[0],u=o[1],h=o[2],p=o[3];u===p&&(l<h?e[l-1][u-1]="\u2227":e[h-1][p-1]="\u2228")}}catch(d){c.e(d)}finally{c.f()}return e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{cellMargin:{margin:"20px"},rightLabels:this.getRightLabels(),bottomLabels:this.getBottomLabels()}))}}]),s}(a.a.Component),G=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={colsums:Object.values(r.props.params.colsums),rowsums:Object.values(r.props.params.rowsums),grid:Object.values(r.props.params.therms).map((function(e){return Object.values(e)}))},r}return Object(o.a)(s,[{key:"getBackgrounds",value:function(){for(var e=this.state.grid,t=[],s=this.state.grid.length,r=this.state.grid[0].length,a=0;a<s;a++){t[a]=[];for(var i=0;i<r;i++){var n=Math.floor(e[a][i]/10),c=a>0?Math.floor(e[a-1][i]/10):null,o=a<s-1?Math.floor(e[a+1][i]/10):null,l=i>0?Math.floor(e[a][i-1]/10):null,u=i<r-1?Math.floor(e[a][i+1]/10):null;e[a][i]%10===1?c===n?t[a].push("url(images/themHeadN.png)"):l===n?t[a].push("url(images/themHeadW.png)"):u===n?t[a].push("url(images/themHeadE.png)"):o===n&&t[a].push("url(images/themHeadS.png)"):c===n&&o!==n?t[a].push("url(images/themTipS.png)"):o===n&&c!==n?t[a].push("url(images/themTipN.png)"):c===n&&o===n?t[a].push("url(images/themV.png)"):u===n&&l!==n?t[a].push("url(images/themTipW.png)"):l===n&&u!==n?t[a].push("url(images/themTipE.png)"):u===n&&l===n&&t[a].push("url(images/themH.png)")}}return t}},{key:"getCellBorders",value:function(){for(var e=[],t=0;t<this.state.grid.length;t++){e[t]=[];for(var s=0;s<this.state.grid[0].length;s++)e[t].push({borderTop:0===t?"2px solid black":"2px solid lightgray",borderBottom:t===this.state.x-1?"2px solid black":"2px solid lightgray",borderLeft:0===s?"2px solid black":"2px solid lightgray",borderRight:s===this.state.y-1?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"render",value:function(){return Object(v.jsx)(B,{highlight:this.props.highlight,cellBackgrounds:this.getBackgrounds(),highlighted:this.props.highlighted,colsums:this.state.colsums,rowsums:this.state.rowsums,rows:this.props.rows,cellBorders:this.getCellBorders()},this.props.key)}}]),s}(a.a.Component),V=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={size:r.props.params.SIZE,rowsums:Object.values(r.props.params.CLUES[1]).map((function(e){return 0===e?null:e})),colsums:Object.values(r.props.params.CLUES[2]).map((function(e){return 0===e?null:e})),endrowsums:Object.values(r.props.params.CLUES[3]).map((function(e){return 0===e?null:e})),endcolsums:Object.values(r.props.params.CLUES[4]).map((function(e){return 0===e?null:e}))},r}return Object(o.a)(s,[{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{colsums:this.state.colsums,endcolsums:this.state.endcolsums,rowsums:this.state.rowsums,endrowsums:this.state.endrowsums}))}}]),s}(a.a.Component),Q=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={grid:Object.values(r.props.params.presetvals).map((function(e){return Object.values(e)})),operations:Object.values(r.props.params.op),opMap:{1:"+",2:"-",3:"\xd7"}},r}return Object(o.a)(s,[{key:"getCellBorders",value:function(){for(var e=[],t=this.state.grid,s=0;s<t.length;s++){e[s]=[];for(var r=0;r<t[0].length;r++)e[s].push({borderTop:-2===t[s][r]?"2px solid transparent":"2px solid lightgray",borderBottom:-2===t[s][r]?"2px solid transparent":"2px solid lightgray",borderLeft:-2===t[s][r]?"2px solid transparent":"2px solid lightgray",borderRight:-2===t[s][r]?"2px solid transparent":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"getRightLabels",value:function(){for(var e=[],t=this.state,s=t.grid,r=t.opMap,a=t.operations,i=0;i<s.length;i++){e[i]=[];for(var n=0;n<s[0].length;n++)e[i].push(null)}return e[0][1]="=",e[0][5]="=",e[1][3]="=",e[3][1]="=",e[3][5]="=",e[5][1]="=",e[5][5]="=",e[8][1]="=",e[8][5]="=",e[0][0]=r[a[0]],e[0][4]=r[a[1]],e[1][2]=r[a[6]],e[3][0]=r[a[7]],e[3][4]=r[a[8]],e[5][0]=r[a[11]],e[5][4]=r[a[12]],e[6][2]=r[a[17]],e[8][0]=r[a[18]],e[8][4]=r[a[19]],e}},{key:"getBottomLabels",value:function(){for(var e=[],t=this.state,s=t.grid,r=t.opMap,a=t.operations,i=0;i<s.length;i++){e[i]=[];for(var n=0;n<s[0].length;n++)e[i].push(null)}return e[1][0]="=",e[1][2]="=",e[1][4]="=",e[1][6]="=",e[4][1]="=",e[4][5]="=",e[6][0]="=",e[6][2]="=",e[6][4]="=",e[6][6]="=",e[0][0]=r[a[2]],e[0][2]=r[a[3]],e[0][4]=r[a[4]],e[0][6]=r[a[5]],e[3][1]=r[a[9]],e[3][5]=r[a[10]],e[5][0]=r[a[13]],e[5][2]=r[a[14]],e[5][4]=r[a[15]],e[5][6]=r[a[16]],e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{hiddenLiterals:[-2],cellBorders:this.getCellBorders(),rightLabels:this.getRightLabels(),bottomLabels:this.getBottomLabels()}))}}]),s}(a.a.Component),P=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={rowcounts:Object.values(r.props.params.rowcounts).map((function(e){return Object.values(e)})),colcounts:Object.values(r.props.params.colcounts).map((function(e){return Object.values(e)}))},r}return Object(o.a)(s,[{key:"getBackgrounds",value:function(){var e={0:"linear-gradient(white, white)",1:"linear-gradient(black, black)"};return e}},{key:"transpose",value:function(e){return e[0].map((function(t,s){return e.map((function(e){return e[s]}))}))}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{literalBackgrounds:this.getBackgrounds(),hiddenLiterals:[0,1],startrows:this.transpose(this.state.colcounts),startcols:this.transpose(this.state.rowcounts)}))}}]),s}(a.a.Component),_=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"getCellBorders",value:function(){for(var e=[],t=0;t<9;t++){e[t]=[];for(var s=0;s<9;s++)e[t].push({borderTop:t%3===0?"2px solid black":"2px solid lightgray",borderBottom:8===t?"2px solid black":"2px solid lightgray",borderLeft:s%3===0?"2px solid black":"2px solid lightgray",borderRight:8===s?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"})}return e}},{key:"render",value:function(){return Object(v.jsx)(B,Object(g.a)(Object(g.a)({},this.props),{},{cellBorders:this.getCellBorders(),literalSize:.7}))}}]),s}(a.a.Component),K=s(98),Y=s(29),Z=s.n(Y);function $(){return($=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("examples");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return X.apply(this,arguments)}function X(){return(X=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("examples/".concat(t));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("api/eprime");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return se.apply(this,arguments)}function se(){return(se=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.post("api/job",t);case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("api/job/".concat(t));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.a.get("api/job/".concat(t,"/output"));case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={status:"pending",pollDelay:1e3,pollCount:0,error:null,log:null,progress:null},r}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){return e.checkStatus()}),this.state.pollDelay)}},{key:"componentDidUpdate",value:function(e,t){var s=this;t.pollDelay!==this.state.pollDelay&&(clearInterval(this.timer),this.timer=setInterval((function(){return s.checkStatus()}),this.state.pollDelay))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"checkStatus",value:function(){var e=this;(function(e){return re.apply(this,arguments)})(this.props.jobId).then((function(t){"finished"===t.status?function(e){return ae.apply(this,arguments)}(e.props.jobId).then((function(t){clearInterval(e.timer),e.props.setInput(t,e.props.mode)})).catch((function(t){clearInterval(e.timer),t.response?e.setState({error:t.response.data}):e.setState({error:t})})):e.setState({log:t.log,progress:t.progress})})),this.setState({pollCount:this.state.pollCount+1}),30===this.state.pollCount&&this.setState({pollDelay:1e4})}},{key:"render",value:function(){return Object(v.jsx)("div",{children:null!==this.state.error?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Demystify job failed"}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Job ID:"})," ",this.props.jobId]}),Object(v.jsxs)(F.a,{variant:"warning",className:"m-4",children:[Object(v.jsx)("b",{children:"Error message: "}),this.state.error]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(K.a,{animation:"border"}),Object(v.jsx)("h4",{children:"Demystify is running... "}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Job ID:"})," ",this.props.jobId]}),Object(v.jsxs)("p",{children:["If you don't want to wait here for the job to complete you can check its progress later at: ",Object(v.jsx)("br",{})," ",Object(v.jsx)("a",{href:window.location+"api/job/"+this.props.jobId,children:window.location+"api/job/"+this.props.jobId}),Object(v.jsx)("br",{})," and then save the result when it's ready from:",Object(v.jsx)("br",{})," ",Object(v.jsx)("a",{href:window.location+"api/job/"+this.props.jobId+"/output",children:window.location+"api/job/"+this.props.jobId+"/output"}),this.state.log&&Object(v.jsxs)(F.a,{className:"m-4",variant:"info",children:[this.state.progress&&Object(v.jsx)("b",{children:this.state.progress}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{maxHeight:"8em",overflowY:"scroll",display:"flex",flexDirection:"column-reverse",size:"10pt"},children:this.state.log.reverse().map((function(e){return Object(v.jsx)("p",{style:{textAlign:"left"},children:e})}))})]})]})]})})}}]),s}(a.a.Component),ne=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).state={currentStep:0,highlightedLiterals:-1,highlightedExplanations:[],selectedLiteral:null,currentChoice:0,selectedChoice:0,type:r.props.type,params:r.props.params,inputObject:r.props.inputObject,continueData:r.props.continueData,isWaiting:!1,finishedPuzzle:!1,error:null},r}return Object(o.a)(s,[{key:"chooseBoard",value:function(e){switch(this.state.type){case"tents.eprime":return Object(v.jsx)(R,Object(g.a)({},e));case"binairo.eprime":return Object(v.jsx)(M,Object(g.a)({},e));case"nice_killer.eprime":return Object(v.jsx)(U,Object(g.a)({},e));case"star-battle.eprime":return Object(v.jsx)(H,Object(g.a)({},e));case"kakuro.eprime":return Object(v.jsx)(W,Object(g.a)({},e));case"kakurasu.eprime":return Object(v.jsx)(T,Object(g.a)({},e));case"nfutoshiki.eprime":return Object(v.jsx)(A,Object(g.a)({},e));case"thermometer.eprime":return Object(v.jsx)(G,Object(g.a)({},e));case"skyscrapers.eprime":return Object(v.jsx)(V,Object(g.a)({},e));case"garam.eprime":return Object(v.jsx)(Q,Object(g.a)({},e));case"nonogram.eprime":return Object(v.jsx)(P,Object(g.a)({},e));case"x-sums.eprime":case"miracle.eprime":case"sudoku.eprime":return Object(v.jsx)(_,Object(g.a)({},e));default:return Object(v.jsx)(B,Object(g.a)({},e))}}},{key:"isChoicesStep",value:function(){return"manual"===this.props.mode&&!this.state.finishedPuzzle&&this.state.currentStep===this.state.inputObject.length-1}},{key:"isLitForceStep",value:function(){return"force"===this.props.mode&&!this.state.finishedPuzzle&&this.state.currentStep===this.state.inputObject.length-1}},{key:"highlightLiteral",value:function(e){this.setState((function(t){return{highlightedLiterals:t.highlightedLiterals===e?-1:e}}))}},{key:"highlightExplanation",value:function(e){this.setState((function(t){return{highlightedExplanations:JSON.stringify(t.highlightedExplanations)===JSON.stringify(e)?[]:e}}))}},{key:"setCurrentStep",value:function(e){this.setState({currentStep:e,currentChoice:0})}},{key:"setChoice",value:function(e){this.setState({currentChoice:e})}},{key:"getEndButton",value:function(){return this.isChoicesStep()?Object(v.jsxs)(O.a,{variant:"success",disabled:this.state.isWaiting,onClick:this.handleGetNext.bind(this),children:["Confirm Choice"," "]}):this.isLitForceStep()?Object(v.jsxs)(O.a,{variant:"success",disabled:this.state.isWaiting,onClick:this.handleGetNextWithForce.bind(this),children:["Confirm Choice"," "]}):null}},{key:"appendInput",value:function(e,t){this.setState({currentChoice:0,selectedChoice:0,selectedLiteral:null,currentStep:"force"===this.props.mode?this.state.currentStep:this.state.currentStep+1,continueData:e,finishedPuzzle:e.finished,inputObject:[].concat(Object(m.a)(this.state.inputObject.slice(0,-1)),Object(m.a)(e.result.steps)),isWaiting:!1})}},{key:"handleGetNext",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,s,r,a,i,n,c,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.continueData,s=t.eprimeName,r=t.eprime,a=t.paramName,i=t.param,n=t.algorithm,c=t.explainedLits,o=this.state.currentChoice,e.next=4,te({eprimeName:s,eprime:r,paramName:a,param:i,algorithm:n,numSteps:1,explainedLits:c,choice:o});case 4:l=e.sent,this.setState({isWaiting:!0,jobId:l.jobId});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSkip",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,s,r,a,i,n,c,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.continueData,s=t.eprimeName,r=t.eprime,a=t.paramName,i=t.param,n=t.algorithm,c=t.explainedLits,this.state.currentChoice,e.next=4,te({eprimeName:s,eprime:r,paramName:a,param:i,algorithm:n,numSteps:1,explainedLits:c,choice:0,appendCurrent:"force"===this.props.mode});case 4:o=e.sent,this.setState({isWaiting:!0,jobId:o.jobId});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleGetNextWithForce",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,s,r,a,i,n,c,o,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.selectedLiteral){e.next=3;break}return this.setState({error:"Please choose a literal to continue."}),e.abrupt("return");case 3:return t=this.state.continueData,s=t.eprimeName,r=t.eprime,a=t.paramName,i=t.param,n=t.algorithm,c=t.explainedLits,o=this.state.selectedLiteral,l={row:o.row+1,column:o.column+1,value:o.value},e.next=8,te({eprimeName:s,eprime:r,paramName:a,param:i,algorithm:n,numSteps:1,explainedLits:c,litChoice:l});case 8:u=e.sent,this.setState({isWaiting:!0,jobId:u.jobId,error:null});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStepData",value:function(){return this.isChoicesStep()?this.state.inputObject[this.state.currentStep].choices[this.state.currentChoice]:0===this.state.currentChoice?this.state.inputObject[this.state.currentStep]:this.state.inputObject[this.state.currentStep].otherChoices[this.state.currentChoice-1]}},{key:"getAlternatives",value:function(){return this.isChoicesStep()?this.state.inputObject[this.state.currentStep].choices:this.state.inputObject[this.state.currentStep].otherChoices}},{key:"handleSelectChoice",value:function(){this.setState({selectedChoice:this.state.currentChoice})}},{key:"setSelectedLiteral",value:function(e,t,s){this.setState({selectedLiteral:{row:e,column:t,value:s}})}},{key:"render",value:function(){var e=this.getStepData(),t={params:this.state.params,highlight:this.highlightExplanation.bind(this),key:this.state.highlightedLiterals,highlighted:this.state.highlightedLiterals,rows:e.puzzleState.matrices[0].rows,setSelectedLiteral:this.setSelectedLiteral.bind(this)};return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(y,{className:"mt-3 p-3",stepName:"step",setCurrentStep:this.setCurrentStep.bind(this),maxSteps:this.state.inputObject.length-1,currentStep:this.state.currentStep,endButton:this.getEndButton()}),this.state.isWaiting?Object(v.jsx)(w.a,{className:"mt-4 d-flex justify-content-center align-items-center",children:Object(v.jsx)(f.a,{className:"mt-3",children:Object(v.jsx)(f.a.Body,{children:Object(v.jsx)(ie,{jobId:this.state.jobId,setInput:this.appendInput.bind(this),mode:this.state.mode})})})}):Object(v.jsxs)(w.a,{className:"mb-4",children:[Object(v.jsx)(k.a,{xs:12,md:8,lg:8,xl:6,children:this.chooseBoard(t)}),Object(v.jsxs)(k.a,{children:[this.isLitForceStep()&&Object(v.jsx)(f.a,{className:"mt-3",children:Object(v.jsxs)(f.a.Body,{children:[Object(v.jsx)("b",{children:"Choose a literal (value on the board) to force explanations for that literal."}),Object(v.jsx)("br",{})," ",Object(v.jsx)("br",{})," Currently selected literal:",Object(v.jsx)("b",{children:this.state.selectedLiteral?" ["+(this.state.selectedLiteral.row+1)+", "+(this.state.selectedLiteral.column+1)+"] with value "+this.state.selectedLiteral.value:" none"}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a,{className:"mt-4",variant:"secondary",onClick:this.handleSkip.bind(this),children:"Skip choice for this step"})]})}),e.skippedDeductions&&Object(v.jsx)(f.a,{className:"mt-3",children:Object(v.jsx)(f.a.Body,{children:Object(v.jsx)("small",{children:"Skipped some obvious deductions."})})}),this.state.error&&Object(v.jsx)(F.a,{className:"mt-3",variant:"warning",children:this.state.error}),!this.isLitForceStep()&&Object(v.jsx)(D,{highlight:this.highlightLiteral.bind(this),simpleDeductions:e.simpleDeductions,deduction:e.deduction,highlighted:this.state.highlightedExplanations,boldBorder:this.isChoicesStep()&&this.state.currentChoice===this.state.selectedChoice,choices:this.getAlternatives(),smallestMUSSize:this.state.inputObject[this.state.currentStep].smallestMUSSize,setChoice:this.setChoice.bind(this),currentChoice:this.state.currentChoice,extraChoice:!this.isChoicesStep(),children:this.isChoicesStep()&&Object(v.jsxs)(v.Fragment,{children:[this.state.currentChoice!==this.state.selectedChoice?Object(v.jsx)(O.a,{onClick:this.handleSelectChoice.bind(this),className:"mt-3",variant:"success",children:"Select explanation"}):Object(v.jsx)(O.a,{className:"mt-3",disabled:!0,variant:"success",children:"Currently selected"}),Object(v.jsxs)("p",{className:"mt-3",children:["Currently selected choice:"," ",this.state.selectedChoice+1]})," "]})})]})]})]})}}]),s}(a.a.Component),ce=s(38),oe=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).uploadFile=function(){var e=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(s=new FileReader).onload=function(){var e=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{s=t.target.result,r.props.onUpload(s,r.fileInput.current.files[0].name)}catch(a){r.props.onError()}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.readAsText(t.target.files[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.fileInput=a.a.createRef(),r}return Object(o.a)(s,[{key:"componentDidUpdate",value:function(e){this.props!==e&&this.props.noFile&&(this.fileInput.current.value="")}},{key:"render",value:function(){var e=this;return Object(v.jsx)("input",{disabled:this.props.disabled,type:"file",ref:this.fileInput,onChange:function(t){return e.uploadFile(t)}})}}]),s}(a.a.Component),le=s(99),ue=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.name,s=e.choices,r=e.makeChoice,a=e.disabled,i=e.isLoading;return Object(v.jsxs)(le.a,{onSelect:function(e){return r(e)},children:[Object(v.jsx)(le.a.Toggle,{disabled:a,variant:"success",id:"dropdown-basic",children:t}),Object(v.jsx)(le.a.Menu,{style:{maxHeight:"20vh",overflowY:"scroll"},children:i?Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)(K.a,{animation:"border"})}):s.map((function(e){return Object(v.jsx)(le.a.Item,{eventKey:e,onClick:function(){return r(e)},children:e},e)}))})]})}}]),s}(a.a.Component),he=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props,t=e.name,s=e.choices,r=e.labels,a=e.selected,i=e.onSelect;return Object(v.jsxs)(x.a,{inline:!0,className:"mx-4 mb-3",children:[Object(v.jsxs)(x.a.Label,{className:"mr-4",children:[t[0].toUpperCase()+t.substring(1)+":"," "]}),s.map((function(e,s){return Object(v.jsx)(x.a.Check,{className:"mr-4",type:"radio",name:t,value:e,checked:a===e,onChange:i,label:r[s]})}))]})}}]),s}(a.a.Component),pe=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var r;return Object(c.a)(this,s),(r=t.call(this,e)).componentDidUpdate=function(){r.state.isQueueing||r.state.isWaiting?window.onbeforeunload=function(){return!0}:window.onbeforeunload=void 0},r.state={examples:[],eprimeChoices:[],chosenEprime:null,eprime:null,eprimeName:null,param:null,paramName:null,mode:"default",algorithm:"cascade-fast",isLoadingExamples:!0,isLoadingEprime:!0,isLoadingExampleJSON:!1,isQueueing:!1,isWaiting:!1,jobId:null,error:""},r}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;(function(){return $.apply(this,arguments)})().then((function(t){return e.setState({examples:t},(function(){return e.setState({isLoadingExamples:!1})}))})),function(){return ee.apply(this,arguments)}().then((function(t){return e.setState({eprimeChoices:t},(function(){return e.setState({isLoadingEprime:!1})}))}))}},{key:"setError",value:function(e){this.setState({error:e})}},{key:"chooseExample",value:function(){var e=Object(j.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoadingExampleJSON:!0}),e.next=3,q(t);case 3:s=e.sent,this.props.setInput({result:s},"default");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"chooseEprime",value:function(e){var t=e.toString().split(",");this.setState({eprimeName:t[0],eprime:null,paramName:t[1].replace(/\s/g,""),param:null,chosenEprime:t[1].replace(/\s/g,"").substr(0,8)+"..."})}},{key:"handleOptionChange",value:function(e){this.setState(Object(ce.a)({},e.target.name,e.target.value))}},{key:"handleGo",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,s,r,a,i,n,c,o,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.eprimeName&&this.state.paramName){e.next=3;break}return this.setError("Please select .eprime and .param files to run Demystify."),e.abrupt("return");case 3:return this.setState({isQueueing:!0}),t=this.state,s=t.eprimeName,r=t.eprime,a=t.paramName,i=t.param,n=t.mode,c=t.algorithm,o="default"===n?-1:0,l="force"===n,e.prev=7,e.next=10,te({eprimeName:s,eprime:r,paramName:a,param:i,algorithm:c,numSteps:o,explainedLits:[],getInitial:l});case 10:u=e.sent,this.setState({isWaiting:!0,jobId:u.jobId}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),this.setError("There was a problem running Demystify on the server."),this.setState({isQueueing:!1});case 18:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(v.jsx)("h1",{className:"mt-3",children:"Demystify Visualiser"}),Object(v.jsx)("img",{className:"mt-3",style:{width:"80px"},alt:"demystify logo",src:"favicon.ico"}),Object(v.jsx)(f.a,{as:w.a,className:"mt-3 pt-3 w-75",children:this.state.isWaiting?Object(v.jsx)(ie,{jobId:this.state.jobId,setInput:this.props.setInput,mode:this.state.mode}):Object(v.jsxs)(E.a,{variant:"flush",children:[Object(v.jsx)(E.a.Item,{children:Object(v.jsxs)(w.a,{children:[Object(v.jsx)("b",{className:"mx-4",children:" Load Demystify output from JSON file:"}),Object(v.jsx)(oe,{disabled:this.state.isQueueing||this.state.isLoadingExampleJSON,onUpload:function(t){return e.props.setInput({result:JSON.parse(t)},"default")},onError:function(){return e.setError("Could not read the input file. Ensure it is a JSON file                          produced by Demystify.")}})]})}),Object(v.jsx)(E.a.Item,{children:Object(v.jsxs)(w.a,{children:[Object(v.jsx)("b",{className:"mx-4 pt-2",children:"View a pre-generated example:"}),Object(v.jsx)(ue,{name:"Examples",choices:this.state.examples,makeChoice:this.chooseExample.bind(this),disabled:this.state.isQueueing,isLoading:this.state.isLoadingExamples}),this.state.isLoadingExampleJSON&&Object(v.jsx)(K.a,{className:"ml-4",animation:"border"})]})}),Object(v.jsx)(E.a.Item,{children:Object(v.jsxs)(w.a,{children:[Object(v.jsx)("b",{className:"mx-4 pt-2",children:"Try your own Sudoku instance:"}),Object(v.jsx)(O.a,{variant:"success",onClick:this.props.handleBuildSudoku,children:"Create"})]})}),Object(v.jsxs)(E.a.Item,{children:[Object(v.jsx)(w.a,{children:Object(v.jsx)("b",{className:"mx-4 mb-2",children:"Run Demystify live:"})}),Object(v.jsxs)(w.a,{children:[Object(v.jsx)("p",{className:"mx-4 pt-2 mb-2",children:"Select an eprime/param combination:"}),Object(v.jsx)(ue,{name:this.state.chosenEprime?this.state.chosenEprime:"Essence",choices:this.state.eprimeChoices,makeChoice:this.chooseEprime.bind(this),disabled:this.state.isQueueing,isLoading:this.state.isLoadingEprime})]}),Object(v.jsx)(w.a,{children:Object(v.jsx)("b",{className:"mx-4 mb-2",children:"OR"})}),Object(v.jsxs)(w.a,{children:[Object(v.jsx)("p",{className:"mx-4",children:"Upload puzzle description (.eprime): "}),Object(v.jsx)(oe,{disabled:this.state.isQueueing||this.state.isLoadingExampleJSON,onUpload:function(t,s){return e.setState({chosenEprime:null,eprime:t,eprimeName:s})},onError:function(){return e.setError("Could not read the input file. Ensure it is a valid                           .eprime file.")},noFile:null===this.state.eprime})]}),Object(v.jsxs)(w.a,{children:[Object(v.jsx)("p",{className:"mx-4",children:"and puzzle instance (.param): "}),Object(v.jsx)(oe,{disabled:this.state.isQueueing||this.state.isLoadingExampleJSON,onUpload:function(t,s){return e.setState({chosenEprime:null,param:t,paramName:s})},onError:function(){return e.setError("Could not read the input file. Ensure it is a valid                           .param file.")},noFile:null===this.state.param})]}),Object(v.jsx)(w.a,{children:Object(v.jsx)(he,{name:"mode",choices:["default","manual","force"],labels:["Use default MUS choices","Choose MUSes manually","Force literal choices."],selected:this.state.mode,onSelect:this.handleOptionChange.bind(this)})}),Object(v.jsx)(w.a,{children:Object(v.jsx)(he,{name:"algorithm",choices:["cascade-fast","cascade-more","forqes"],labels:["Cascade - faster","Cascade - more choices","FORQES"],selected:this.state.algorithm,onSelect:this.handleOptionChange.bind(this)})}),Object(v.jsxs)(w.a,{children:[Object(v.jsx)(O.a,{disabled:this.state.isQueueing||this.state.isLoadingExampleJSON,className:"mx-4",variant:"success",onClick:this.handleGo.bind(this),children:"Go"}),this.state.isQueueing&&Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)(K.a,{animation:"border"}),Object(v.jsx)("p",{className:"ml-4",children:"Setting up Demystify job..."})]})]})]})]})}),this.state.error.length>0&&Object(v.jsx)(F.a,{variant:"warning",className:"mt-3 p-4 w-75 text-center",children:this.state.error})]})}}]),s}(a.a.Component),de=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(c.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={grid:Array.apply(null,Array(9)).map((function(e,t){return Array.apply(null,Array(9)).map((function(e,t){return""}))})),isRunning:!1,isWaiting:!1,error:null},e}return Object(o.a)(s,[{key:"getSudokuBorders",value:function(e,t){return{borderTop:e%3===0?"2px solid black":"2px solid lightgray",borderBottom:8===e?"2px solid black":"2px solid lightgray",borderLeft:t%3===0?"2px solid black":"2px solid lightgray",borderRight:8===t?"2px solid black":"2px solid lightgray",marginLeft:"-2px",marginBottom:"-2px"}}},{key:"handleChange",value:function(e,t,s){/^\d$|^$/.test(s.target.value)&&this.updateGrid(e,t,s.target.value)}},{key:"updateGrid",value:function(e,t,s){var r=this.state.grid;r[e][t]=s,this.setState({grid:r})}},{key:"getParamString",value:function(){return"letting fixed be \n\n ["+this.state.grid.map((function(e){return"\n    ["+e.map((function(e){return""===e?"0":e}))+"]"}))+"\n]"}},{key:"handleSave",value:function(){var e=document.createElement("a"),t=new Blob([this.getParamString()],{type:"text/plain;charset=utf-8"});e.href=URL.createObjectURL(t),e.download="sudoku_builder.param",document.body.appendChild(e),e.click()}},{key:"handleRun",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isRunning:!0}),e.prev=1,e.next=4,te({eprimeName:"sudoku.eprime",eprime:null,paramName:"sudoku_builder_"+Date.now()+".param",param:this.getParamString(),algorithm:"cascade",numSteps:-1,explainedLits:[]});case 4:t=e.sent,this.setState({isWaiting:!0,jobId:t.jobId}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),this.setError("There was a problem running Demystify on the server."),this.setState({isRunning:!1});case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setError",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this,t=this.state.grid;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(w.a,{className:"d-flex justify-content-center",children:Object(v.jsx)(k.a,{xs:12,lg:8,children:Object(v.jsx)(f.a,{className:"mt-3 pt-3 w-100",children:Object(v.jsxs)(f.a.Body,{className:"d-flex justify-content-between",children:[Object(v.jsx)(O.a,{disabled:this.state.isRunning,onClick:this.handleSave.bind(this),variant:"success",children:"Save as .param file"}),Object(v.jsxs)("p",{className:"mt-2",style:{textAlign:"center"},children:["Fill in your desired starting grid values:"," "]}),Object(v.jsx)(O.a,{disabled:this.state.isRunning,onClick:this.handleRun.bind(this),variant:"success",children:"Run Demystify"})]})})})}),this.state.error&&Object(v.jsx)(F.a,{className:"mt-3",variant:"warning",children:this.state.error}),Object(v.jsx)(w.a,{className:"d-flex justify-content-center",children:Object(v.jsx)(k.a,{xs:12,sm:8,md:8,lg:5,children:Object(v.jsx)(f.a,{className:"mt-3 pt-3",children:Object(v.jsx)(f.a.Body,{children:this.state.isWaiting?Object(v.jsx)(ie,{jobId:this.state.jobId,setInput:this.props.setInput,mode:this.state.mode}):t.map((function(t,s){return Object(v.jsx)(N,{children:t.map((function(t,r){return Object(v.jsx)(C,{borders:e.getSudokuBorders(s,r),children:Object(v.jsx)(x.a.Control,{className:"m-0 w-100 h-100",style:{border:0,textAlign:"center",fontWeight:"bold",fontSize:"2vw"},value:t,onFocus:function(){return e.updateGrid(s,r,"")},type:"text",size:"1",onChange:function(t){return e.handleChange(s,r,t)}})})}))})}))})})})})]})}}]),s}(a.a.Component),be=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(c.a)(this,s);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={inputObject:[],type:"",params:{},error:!1,mode:"default",continueData:null,buildSudoku:!1},e.render=function(){return Object(v.jsx)(p.a,{fluid:!0,style:{textAlign:"center"},children:0===e.state.inputObject.length||e.state.error?e.state.buildSudoku?Object(v.jsx)(de,{setInput:e.setJSONInput.bind(Object(l.a)(e))}):Object(v.jsx)(pe,{setInput:e.setJSONInput.bind(Object(l.a)(e)),handleBuildSudoku:e.handleBuildSudoku.bind(Object(l.a)(e))}):Object(v.jsx)(ne,{inputObject:e.state.inputObject,continueData:e.state.continueData,type:e.state.type,params:e.state.params,mode:e.state.mode})})},e}return Object(o.a)(s,[{key:"setJSONInput",value:function(e,t){var s=this,r=e.result;this.setState({continueData:e,inputObject:r.steps,type:r.name,params:r.params,mode:t},(function(){return!(s.state.inputObject&&s.state.type&&s.state.params)&&s.setError()})),e.finished&&this.setState({mode:"default"})}},{key:"setError",value:function(){this.setState({error:!0})}},{key:"conponentDidUpdate",value:function(e,t){t.error&&this.setState({error:!1})}},{key:"handleBuildSudoku",value:function(){this.setState({buildSudoku:!0})}}]),s}(a.a.Component),je=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,105)).then((function(t){var s=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,n=t.getTTFB;s(e),r(e),a(e),i(e),n(e)}))};s(90);n.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(be,{})}),document.getElementById("root")),je()}},[[91,1,2]]]);
//# sourceMappingURL=main.90a52186.chunk.js.map